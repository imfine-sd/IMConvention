(function(e){function t(t){for(var o,r,s=t[0],c=t[1],l=t[2],d=0,f=[];d<s.length;d++)r=s[d],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&f.push(i[r][0]),i[r]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);u&&u(t);while(f.length)f.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],o=!0,s=1;s<n.length;s++){var c=n[s];0!==i[c]&&(o=!1)}o&&(a.splice(t--,1),e=r(r.s=n[0]))}return e}var o={},i={app:0},a=[];function r(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=o,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/IMConvention/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var u=c;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";n("85ec")},"0df0":function(e,t){e.exports="data:image/png;base64,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"},"1bbe":function(e,t,n){"use strict";n("1cb9")},"1cb9":function(e,t,n){},"1ecf":function(e,t,n){"use strict";n("a96d")},"20c4":function(e,t,n){"use strict";n("30f0")},2763:function(e,t,n){"use strict";n("d5f6")},"30f0":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",{staticClass:"app_main"},[n("router-view",{ref:"views"})],1)},a=[],r=n("5530"),s=(n("ade3"),{}),c="IMFINE_SD_STORAGE",l="STR_USER_NAME",u="STR_WEB_RTC_URL",d="STR_WEB_RTC_RECEIVE_STREAM",f="STR_WEB_RTC_SENDER_STREAM",m="STR_WEB_RTC_VIDEO_BITRATE",v="STR_WEB_RTC_AUDIO_BITRATE",g="STR_WEB_RTC_FRAME_SIZE",h="STR_WEB_RTC_FRMAE_RATE",p={STR_USER_NAME:l,STR_WEB_RTC_URL:u,STR_WEB_RTC_RECEIVE_STREAM:d,STR_WEB_RTC_SENDER_STREAM:f,STR_WEB_RTC_VIDEO_BITRATE:m,STR_WEB_RTC_AUDIO_BITRATE:v,STR_WEB_RTC_FRAME_SIZE:g,STR_WEB_RTC_FRMAE_RATE:h},_={STR_USER_NAME:"",STR_WEB_RTC_URL:"5f852799e11d1",STR_WEB_RTC_RECEIVE_STREAM:"",STR_WEB_RTC_SENDER_STREAM:"Test",STR_WEB_RTC_VIDEO_BITRATE:2e3,STR_WEB_RTC_AUDIO_BITRATE:64,STR_WEB_RTC_FRAME_SIZE:"default",STR_WEB_RTC_FRMAE_RATE:30};function b(){console.log("SD CONFIG START");var e=localStorage.getItem(c);s=JSON.parse(e)}function C(e){var t=s;return t&&t[e]?t[e]:_[e]}var E=n("2f62"),T=n("260b"),S=(n("66ce"),n("741f"),{apiKey:"AIzaSyBtnFzSNMp30pWM2CNva-U9ZM1sdE8lzts",authDomain:"fir-ca8ad.firebaseapp.com",databaseURL:"https://fir-ca8ad.firebaseio.com",projectId:"fir-ca8ad",storageBucket:"fir-ca8ad.appspot.com",messagingSenderId:"371247898053",appId:"1:371247898053:web:6c4786de640f7d0f47bfac",measurementId:"G-1CF0K55L16"});function A(e){return T["a"].database().ref("/messages").orderByChild("time").limitToLast(e).once("value")}function w(e){return T["a"].database().ref("/messages").orderByChild("time").startAt(e+1).once("value")}function R(e,t){var n=T["a"].database().ref("/"+e).child("data").push().key,o="/"+n,i={};return i[e+"/"+o]=Object(r["a"])({},t),T["a"].database().ref().update(i,(function(e){return e}))}function O(){return T["a"].database().ref("/").once("value").then((function(e){var t=e.val()&&e.val().hls_url||"";return t}))}function B(){console.log("activater user");var e="activate_count",t=1;T["a"].database().ref("/"+e).once("value").then((function(n){console.log("CC",n.val()),void 0!=n.val()&&(t=n.val()+1),console.log("update_count",t);var o={};o[e]=t,T["a"].database().ref().update(o,(function(e){return e}))}))}function x(){var e=T["a"].messaging();e.usePublicVapidKey("BFvIp87EtEOpp2O5c5suhi70YxtRDxB-ZUmzYuN0B-mCplnwVj-u0nJYnK9M_1d70xu5fL6V4Xb8iAoykvvgres"),e.getToken().then((function(e){console.log("FCM",e)})).catch((function(e){console.log("An error occurred while retrieving token. ",e)}))}T["a"].initializeApp(S);var y={name:"App",components:{},created:function(){b(),this.loadMessage(),x()},beforeDestroy:function(){this.DELETE_MESSAGE_EVENT()},data:function(){return{}},methods:Object(r["a"])(Object(r["a"])(Object(r["a"])({},Object(E["d"])(["DELETE_MESSAGE_EVENT"])),Object(E["b"])(["LOAD_MESSAGES","SET_MESSAGE_EVENT"])),{},{loadMessage:function(){var e=this;this.LOAD_MESSAGES().then((function(){console.log("load all messsage"),e.SET_MESSAGE_EVENT()}))}})},I=y,D=(n("034f"),n("2877")),M=n("6544"),j=n.n(M),N=n("7496"),P=Object(D["a"])(I,i,a,!1,null,null,null),U=P.exports;j()(P,{VApp:N["a"]});var W=n("9483");Object(W["a"])("".concat("/IMConvention/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}}),Object(W["a"])("".concat("/IMConvention/","firebase-messaging-sw.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(e){console.log("SUCCSS",e)}});var k=n("8c4f"),q=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"child",style:e.contents_style},[o("img",{staticClass:"logo",attrs:{src:n("f75f")}}),o("div",{staticClass:"version"},[e._v("Build ("+e._s(this.app_version)+")")]),o("div",{staticClass:"field_list"},[o("v-text-field",{attrs:{label:"CODE",outlined:""},model:{value:e.user_code,callback:function(t){e.user_code=t},expression:"user_code"}}),o("v-text-field",{attrs:{value:"John Doe",label:"NICK NAME",outlined:""},model:{value:e.user_name,callback:function(t){e.user_name=t},expression:"user_name"}})],1),o("v-btn",{staticClass:"btn",attrs:{text:"",color:"#03DAC5"},on:{click:e.gotoPreset}},[o("div",{staticClass:"font"},[e._v("CONTINUE")])])],1)},V=[],L=(n("b0c0"),{data:function(){return{user_code:"",user_name:"",app_version:0,contents_style:{height:document.documentElement+"px"}}},created:function(){this.app_version="73",B()},methods:Object(r["a"])(Object(r["a"])({},Object(E["d"])(["SET_NAME","SET_CODE"])),{},{gotoPreset:function(){this.user_code&&this.user_name&&(this.SET_NAME(this.user_name),this.SET_CODE(this.user_code),this.$router.push("/event/preset"))},submit:function(){this.$v.$touch()},clear:function(){this.$v.$reset(),this.name="",this.email="",this.select=null,this.checkbox=!1}})}),F=L,z=(n("df35"),n("8336")),J=n("8654"),H=Object(D["a"])(F,q,V,!1,null,"14ad29a1",null),K=H.exports;j()(H,{VBtn:z["a"],VTextField:J["a"]});var G,Z,$,Y,Q,X=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"root"},[n("HLSVideo",{style:{display:e.is_video_show}}),n("router-view",{staticClass:"contents"})],1),n("div",{class:{preset_sender:!e.is_live_time,live_sender:e.is_live_time}},[n("WebRTCSender",{staticClass:"sender",style:{marginTop:e.margin_top,boxShadow:e.shadow},attrs:{width:e.sender_width,height:e.sender_height}})],1)])},ee=[],te=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("video",{ref:"hls_player",attrs:{id:"player",muted:"",controls:""},domProps:{muted:!0}})},ne=[],oe="EVENT_SET_EVENT_TYPE",ie="EVENT_EMOJI_ACTIVE",ae="EVENT_UPDATE_LIST",re="EVENT_PUBLISH_WEBRTC",se="EVENT_SHOW_SNACKBAR",ce="EVENT_SET_VIDEO_LIST",le="EVENT_SET_AUDIO_LIST",ue="EVENT_SET_CAMERA_ID",de=new o["a"],fe=window.Hls,me=new fe,ve={data:function(){return{window_width:0,window_height:0}},computed:Object(r["a"])({},Object(E["c"])(["getHlsUrl"])),props:["props_tab"],created:function(){var e=this;this.$nextTick((function(){var t=9*window.innerWidth/16;e.$refs.hls_player.style.height=t+"px"})),this.$store.dispatch("LOAD_HLS_URL").then((function(){fe.isSupported()&&(me.attachMedia(e.$refs.hls_player),me.on(fe.Events.MEDIA_ATTACHED,(function(){me.loadSource(e.getHlsUrl)})))})),de.$on(oe,(function(t){"/event/live"===t&&e.playVideo()}))},methods:{playVideo:function(){this.$refs.hls_player.play()}}},ge=ve,he=(n("6be5"),Object(D["a"])(ge,te,ne,!1,null,null,null)),pe=he.exports,_e=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("video",{staticClass:"video",attrs:{id:"wowza-sender",autoplay:"",playsinline:"",muted:""},domProps:{muted:!0}})},be=[],Ce=(n("ac1f"),n("5319"),n("1276"),n("d81d"),n("b680"),n("d3b7"),n("3ca3"),n("498a"),n("ddb0"),n("2b3d"),n("53ca")),Ee=(n("96cf"),n("1da1")),Te=(n("caad"),n("c975"),n("fb6a"),n("a9e3"),n("4d63"),n("25f0"),n("2532"),n("466d"),n("2ca0"),n("d093")),Se=Te["a"].browserDetails;function Ae(e,t){var n=e.split(/\r\n/),o="",i=!1;for(var a in n){var r=n[a];r.length<=0||(o+=r,o+="\r\n",0=="a=rtcp-mux".localeCompare(r)&&0==i&&(o+=t,i=!0))}return o}function we(e,t){var n=e.split(/\r\n/),o="",i=!1,a=!1,r=!1;for(var s in n){var c=n[s];c.length<=0||(c.includes("a=rtcp-rsize")&&(a=!0),c.includes("a=rtcp-mux")&&(r=!0,console.log(r)))}for(var l in n){var u=n[l];o+=u,o+="\r\n",0=="a=rtcp-rsize".localeCompare(u)&&0==i&&1==a&&(o+=t,i=!0),0=="a=rtcp-mux".localeCompare(u)&&1==i&&0==a&&(o+=t,i=!0),0=="a=rtcp-mux".localeCompare(u)&&0==i&&0==a&&(i=!0)}return o}function Re(e,t){for(var n in G){var o=G[n];if(o.includes(e)){if(e.includes("VP9")||e.includes("VP8")){var i="",a=o.split(/\r\n/);for(var r in a){var s=a[r];i+=s,i+="\r\n"}return t.includes("audio")&&(Q=n),t.includes("video")&&(Y=n),i}return t.includes("audio")&&(Q=n),t.includes("video")&&(Y=n),o}}return""}function Oe(e){if(e.startsWith("a=rtpmap")||e.startsWith("a=rtcp-fb")||e.startsWith("a=fmtp")){var t=e.split(":");if(t.length>1){var n=t[1].split(" ");if(!isNaN(n[0])&&!n[1].startsWith("http")&&!n[1].startsWith("ur")){var o=G[n[0]];return o||(o=""),o+=e+"\r\n",G[n[0]]=o,!1}}}return!0}function Be(e){var t=new RegExp("a=rtpmap:(\\d+) (\\w+)/(\\d+)"),n=e.match(t);return n&&n.length>=3?n:null}function xe(e,t){G=new Object,Z="42e01f",$="opus",Y=-1,Q=-1;var n=e.split(/\r\n/),o="header",i=!1,a="";for(var r in null!=t.videoCodec&&""!==t.videoCodec&&(Z=t.videoCodec),null!=t.audioCodec&&""!==t.audioCodec&&($=t.audioCodec),n){var s=n[r];if(!(s.length<=0)){var c=Oe(s);c&&(a+=s,a+="\r\n")}}for(var l in a=Ae(a,Re($,"audio")),a=we(a,Re(Z,"video")),e=a,n=e.split(/\r\n/),a="",n){var u=n[l];if(!(u.length<=0)){if("chrome"===Se.browser){var d=void 0;if(0==u.indexOf("m=audio")&&-1!==Q){d=u.split(" "),a+=d[0]+" "+d[1]+" "+d[2]+" "+Q+"\r\n";continue}if(0==u.indexOf("m=video")&&-1!==Y){d=u.split(" "),a+=d[0]+" "+d[1]+" "+d[2]+" "+Y+"\r\n";continue}}if(a+=u,0===u.indexOf("m=audio")?(o="audio",i=!1):0===u.indexOf("m=video")?(o="video",i=!1):0==u.indexOf("a=rtpmap")&&(o="bandwidth",i=!1),"chrome"===Se.browser&&(0===u.indexOf("a=mid:")||0==u.indexOf("a=rtpmap"))&&!i)if(0=="audio".localeCompare(o))void 0!==t.audioBitrate&&(a+="\r\nb=CT:"+t.audioBitrate,a+="\r\nb=AS:"+t.audioBitrate),i=!0;else if(0=="video".localeCompare(o))void 0!==t.videoBitrate&&(a+="\r\nb=CT:"+t.videoBitrate,a+="\r\nb=AS:"+t.videoBitrate,void 0!==t.videoFrameRate&&(a+="\r\na=framerate:"+t.videoFrameRate)),i=!0;else if(0=="bandwidth".localeCompare(o)){var f=void 0;if(f=Be(u),null!==f){var m=f[2].toLowerCase();0!="vp9".localeCompare(m)&&0!="vp8".localeCompare(m)&&0!="h264".localeCompare(m)&&0!="red".localeCompare(m)&&0!="ulpfec".localeCompare(m)&&0!="rtx".localeCompare(m)||void 0!==t.videoBitrate&&(a+="\r\na=fmtp:"+f[1]+" x-google-min-bitrate="+t.videoBitrate+";x-google-max-bitrate="+t.videoBitrate),0!="opus".localeCompare(m)&&0!="isac".localeCompare(m)&&0!="g722".localeCompare(m)&&0!="pcmu".localeCompare(m)&&0!="pcma".localeCompare(m)&&0!="cn".localeCompare(m)||void 0!==t.audioBitrate&&(a+="\r\na=fmtp:"+f[1]+" x-google-min-bitrate="+t.audioBitrate+";x-google-max-bitrate="+t.audioBitrate)}}if(("firefox"===Se.browser||"safari"===Se.browser)&&0==u.indexOf("c=IN")){if(0=="audio".localeCompare(o)){""!==t.audioBitrate&&(a+="\r\nb=TIAS:"+1e3*Number(t.audioBitrate)+"\r\n",a+="b=AS:"+1e3*Number(t.audioBitrate)+"\r\n",a+="b=CT:"+1e3*Number(t.audioBitrate)+"\r\n");continue}if(0=="video".localeCompare(o)){""!==t.videoBitrate&&(a+="\r\nb=TIAS:"+1e3*Number(t.videoBitrate)+"\r\n",a+="b=AS:"+1e3*Number(t.videoBitrate)+"\r\n",a+="b=CT:"+1e3*Number(t.videoBitrate)+"\r\n");continue}}a+="\r\n"}}return a}var ye=void 0,Ie=void 0,De=void 0,Me=void 0,je=void 0,Ne=void 0,Pe={videoBitrate:"",audioBitrate:"",videoFrameRate:"30",videoCodec:"42e01f",audioCodec:"opus"},Ue=void 0,We=void 0,ke=void 0,qe=void 0,Ve={iceServers:[]};Ve=null;var Le=void 0,Fe=void 0;function ze(e){console.log("WowzaPeerConnectionPublish.gotDescription: SDP:");var t=new Object;null!=Pe.audioBitrate&&(t.audioBitrate=Pe.audioBitrate),null!=Pe.videoBitrate&&(t.videoBitrate=Pe.videoBitrate),null!=Pe.videoFrameRate&&(t.videoFrameRate=Pe.videoFrameRate),null!=Pe.videoCodec&&(t.videoCodec=Pe.videoCodec),null!=Pe.audioCodec&&(t.audioCodec=Pe.audioCodec),null!=ye&&(e.sdp=ye(e.sdp,t)),console.log("WowzaPeerConnectionPublish.gotDescription: Setting local description SDP: "),qe.setLocalDescription(e).then((function(){return ke.send('{"direction":"publish", "command":"sendOffer", "streamInfo":'+JSON.stringify(Ne)+', "sdp":'+JSON.stringify(e)+', "userData":'+JSON.stringify(Ue)+"}")})).catch((function(e){var t=Object(r["a"])({message:"Peer connection failed"},e);Ye(t)}))}function Je(e){return function(){null!=qe&&qe.getStats(null).then(e,(function(e){return console.log(e)}))}}function He(e){try{ke=new WebSocket(e)}catch(t){return void Ye(t)}ke.binaryType="arraybuffer",ke.onopen=function(){console.log("WowzaPeerConnectionPublish.wsConnection.onopen"),qe=new RTCPeerConnection(Ve),Le=void 0,Fe=void 0,qe.onicecandidate=function(e){null!=e.candidate&&console.log("WowzaPeerConnectionPublish.gotIceCandidate: "+{ice:e.candidate})},qe.onconnectionstatechange=function(e){null!=Ie&&Ie(e)},qe.onnegotiationneeded=function(){qe.createOffer(ze,Ye)};var e=je.getTracks();for(var t in e){var n=qe.addTrack(e[t],je);"audio"===e[t].type?Fe=n:"video"===e[t].type&&(Le=n)}},ke.onmessage=function(e){var t=JSON.parse(e.data),n=Number(t["status"]);if(200!=n)Ze(),Ye({message:t["statusDescription"]});else{var o=t["sdp"];if(void 0!==o){var i=new Object;void 0!==Pe.audioBitrate&&(i.audioBitrate=Pe.audioBitrate),void 0!==Pe.videoBitrate&&(i.videoBitrate=Pe.videoBitrate),console.log("WowzaPeerConnectionPublish.wsConnection.onmessage: Setting remote description SDP:"),qe.setRemoteDescription(new RTCSessionDescription(o),(function(){}),Ye)}var a=t["iceCandidates"];if(void 0!==a)for(var r in a)console.log("WowzaPeerConnectionPublish.wsConnection.iceCandidates: "+a[r]),qe.addIceCandidate(new RTCIceCandidate(a[r]))}},ke.onclose=function(){console.log("WowzaPeerConnectionPublish.wsConnection.onclose")},ke.onerror=function(t){console.log("wsConnection.onerror"),console.log(t);var n="Websocket connection failed: "+e;console.log(n);var o=Object(r["a"])({message:n},t);Ze(),Ye(o)}}function Ke(e,t){null!=qe&&(console.log(qe),"audio"===e?null!=Fe?Fe.replaceTrack(t):Fe=qe.addTrack(t):"video"===e&&(null!=Le?Le.replaceTrack(t):Le=qe.addTrack(t)))}function Ge(e){var t=e.wsURL;je=e.localStream,null!=e.streamInfo&&(Ne=e.streamInfo),null!=e.mediaInfo&&(Pe=e.mediaInfo),null!=e.userData&&(Ue=e.userData),null!=e.mungeSDP&&(ye=e.mungeSDP),null!=e.onconnectionstatechange&&(Ie=e.onconnectionstatechange),null!=e.onstop&&(De=e.onstop),null!=e.onerror&&(Me=e.onerror),null!=e.onstats&&(We=setInterval(Je(e.onstats),5e3)),null==qe?(null!=ke&&ke.close(),ke=null,console.log("WowzaPeerConnectionPublish.start: wsURL:"+t+" streamInfo:"+JSON.stringify(Ne)),He(t)):console.log("WowzaPeerConnectionPublish.start: peerConnection already in use, not starting")}function Ze(){null!=qe&&qe.close(),qe=void 0,Le=void 0,Fe=void 0,null!=ke&&ke.close(),ke=void 0,null!=We&&(clearInterval(We),We=void 0),null!=De&&De()}function $e(){return null!=qe}function Ye(e){console.trace(),null!=Me&&Me(e)}var Qe={connect:He,start:Ge,stop:Ze,isStarted:$e,replaceTrack:Ke};function Xe(e){this.context=e,this.instant=0,this.slow=0,this.clip=0,this.script=e.createScriptProcessor(2048,1,1);var t=this;this.script.onaudioprocess=function(e){var n,o=e.inputBuffer.getChannelData(0),i=0,a=0;for(n=0;n<o.length;++n)i+=o[n]*o[n],Math.abs(o[n])>.99&&(a+=1);t.instant=Math.sqrt(i/o.length),t.slow=.95*t.slow+.05*t.instant,t.clip=a/o.length}}Xe.prototype.connectToSource=function(e,t){try{this.mic=this.context.createMediaStreamSource(e),this.mic.connect(this.script),this.script.connect(this.context.destination),"undefined"!==typeof t&&t(null)}catch(n){console.error(n),"undefined"!==typeof t&&t(n)}},Xe.prototype.stop=function(){this.mic.disconnect(),this.script.disconnect()};var et=Xe;window.AudioContext=window.AudioContext||window.webkitAudioContext||!1;var tt={ready:!1,connectionState:"stopped",videoElementPublish:void 0,stream:void 0,isScreenSharing:!1,constraints:{video:{width:{min:"640",ideal:"1280",max:"1920"},height:{min:"360",ideal:"720",max:"1080"},frameRate:"30"},audio:!0},sdpURL:"",streamInfo:{applicationName:"",streamName:"",sessionId:"[empty]"},mediaInfo:{videoBitrate:"",audioBitrate:"",videoFrameRate:"30",videoCodec:"VP8",audioCodec:"opus"},userData:{param1:"value1"},audioEnabled:!0,videoEnabled:!0,useSoundMeter:!1,cameras:[],microphones:[]},nt=void 0,ot=void 0,it={},at=function(e){return new Promise((function(t){tt=Object(r["a"])(Object(r["a"])({},tt),e),null!=it.onStateChanged&&it.onStateChanged(tt),t(tt)}))},rt=function(){return tt},st=function(e){it=e},ct=function(){var e=Object(Ee["a"])(regeneratorRuntime.mark((function e(t){var n,o,i,a,s,c,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("WowzaWebRTC.set"),console.log(t),n=rt(),o=Object(r["a"])({},n.streamInfo),i=Object(r["a"])({},n.mediaInfo),a={},s=!1,null!=t.videoElementPublish&&(a["videoElementPublish"]=t.videoElementPublish),null!=t.useSoundMeter&&(a["useSoundMeter"]=t.useSoundMeter),null!=t.sdpURL&&(a["sdpURL"]=t.sdpURL.trim()),null!=t.applicationName&&(o["applicationName"]=t.applicationName.trim()),null!=t.streamName&&(o["streamName"]=t.streamName.trim()),null!=t.sessionId&&(o["sessionId"]=t.sessionId),null!=t.streamInfo&&(o=Object(r["a"])(Object(r["a"])({},o),t.streamInfo)),a["streamInfo"]=o,null!=t.videoBitrate&&(i.videoBitrate=t.videoBitrate),null!=t.audioBitrate&&(i.audioBitrate=t.audioBitrate),null!=t.videoFrameRate&&(i.videoFrameRate=t.videoFrameRate,a["constraints"]=Object(r["a"])({},n.constraints),"boolean"!==typeof a["constraints"]["video"]&&(""===i.videoFrameRate?delete a["constraints"]["video"]["frameRate"]:a["constraints"]["video"]["frameRate"]=t.videoFrameRate)),null!=t.videoCodec&&(i.videoCodec=t.videoCodec),null!=t.audioCodec&&(i.audioCodec=t.audioCodec),null!=t.mediaInfo&&(i=Object(r["a"])(Object(r["a"])({},i),t.streamInfo)),a["mediaInfo"]=i,null!=t.userData&&(a["userData"]=Object(r["a"])({},t.userData)),null!=t.constraints&&(a["constraints"]=t.constraints),null!=a.constraints&&JSON.stringify(n.constraints)!==JSON.stringify(a.constraints)&&(s=!0),e.prev=25,e.next=28,at(a);case 28:if(c=e.sent,null!=c.stream){e.next=32;break}return e.next=32,ut();case 32:return e.next=34,dt();case 34:if(l=e.sent,!s||null==l.stream){e.next=38;break}return e.next=38,lt(l.stream,l.constraints);case 38:return e.abrupt("return",rt());case 41:return e.prev=41,e.t0=e["catch"](25),Tt(e.t0),e.abrupt("return",null);case 45:case"end":return e.stop()}}),e,null,[[25,41]])})));return function(t){return e.apply(this,arguments)}}(),lt=function(e,t){var n=[],o=e.getAudioTracks(),i=e.getVideoTracks();for(var a in o)n.push(o[a].applyConstraints(t["audio"]));for(var r in i)n.push(i[r].applyConstraints(t["video"]));return Promise.all(n)},ut=function(e){return e=e||"both",new Promise((function(t,n){console.log("WowzaWebRTCPublish.getUserMedia");var o=rt(),i=[],a=[];function r(e){return s.apply(this,arguments)}function s(){return s=Object(Ee["a"])(regeneratorRuntime.mark((function n(r){var s,c,l,u,d,f,m,v;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if("audio"===e&&a.length>0){for(c in s=r.getVideoTracks(),s)r.removeTrack(s[c]);r.addTrack(a[0])}else if("video"===e&&i.length>0){for(u in l=r.getAudioTracks(),l)r.removeTrack(l[u]);r.addTrack(i[0])}if(d={stream:r},"audio"!==e&&o.isScreenSharing){for(f in a)a[f].stop();d["isScreenSharing"]=!1}try{o.videoElementPublish.srcObject=r,d["ready"]=!0}catch(g){console.log("getUserMediaSuccess: error connecting stream to videoElementPublish, trying createObjectURL"),console.log(g),o.videoElementPublish.src=window.URL.createObjectURL(r),d["ready"]=!0}try{"video"!==e&&window.AudioContext&&o.useSoundMeter&&(m=new AudioContext,v=new et(m),v.connectToSource(r,(function(e){e?console.log(e):ot=setInterval((function(){var e=rt().audioEnabled?v.instant.toFixed(2):0;null!=it.onSoundMeter&&it.onSoundMeter(e)}),200)})))}catch(h){console.log("getUserMediaSuccess: error creating audio meter"),console.log(h)}return n.next=7,at(d);case 7:t(d);case 8:case"end":return n.stop()}}),n)}))),s.apply(this,arguments)}null!=o.stream&&(i=o.stream.getAudioTracks(),a=o.stream.getVideoTracks()),"video"!==e&&(null!=nt&&nt.stop(),null!=ot&&clearInterval(ot)),null==o.videoElementPublish&&n({message:"videoElementPublish not set"}),navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia(o.constraints).then(r).catch(Tt):navigator.getUserMedia?navigator.getUserMedia(o.constraints,r,(function(e){Tt(e),n(e)})):(Tt({message:"Your browser does not support WebRTC"}),n())}))},dt=function(){return new Promise((function(e,t){console.log("WowzaWebRTCPublish.getDevices"),navigator.mediaDevices.enumerateDevices().then((function(t){for(var n=Object(r["a"])({},rt().constraints),o=[],i=[],a=0;a<t.length;a++)"videoinput"===t[a].kind?(0===o.length&&(n.video=Object.assign({},n.video,{deviceId:t[a].deviceId})),o.push(t[a])):"audioinput"===t[a].kind&&(0===i.length&&(n.audio=Object.assign({},n.audio,{deviceId:t[a].deviceId})),i.push(t[a]));var s={cameras:o,microphones:i,constraints:n};e(at(s))})).catch((function(e){console.log("unable to detect AV devices: "+e),t(e)}))}))};function ft(e){null!=e.target&&null!=e.target.connectionState&&at({connectionState:e.target.connectionState})}function mt(){at({connectionState:"stopped"})}function vt(e,t){var n=rt();null!=n.stream&&null!=n.stream.getTracks&&n.stream.getTracks().map((function(n){n.kind===e&&(n.enabled=t)}))}function gt(e){console.log("WowzaWebRTC.setAudioEnabled:"+e),vt("audio",e),at({audioEnabled:e})}function ht(e){console.log("WowzaWebRTC.setVideoEnabled:"+e),vt("video",e),at({videoEnabled:e})}function pt(){return new Promise((function(e,t){var n=rt().stream;function o(o){var i={stream:o,isScreenSharing:!0};n.getAudioTracks().length>0&&o.addTrack(n.getAudioTracks()[0]);try{rt().videoElementPublish.srcObject=o,i["ready"]=!0}catch(a){t(a)}at(i),e(o)}var i={video:!0};navigator.getDisplayMedia?navigator.getDisplayMedia(i).then((function(e){o(e,i)})).catch((function(e){t(e)})):navigator.mediaDevices.getDisplayMedia?navigator.mediaDevices.getDisplayMedia(i).then((function(e){o(e,i)})).catch((function(e){t(e)})):(i={video:{mediaSource:"screen"}},navigator.mediaDevices.getUserMedia(i).then((function(e){o(e,i)})).catch((function(e){t(e)})))}))}var _t=function e(t){if(console.log("WowzaWebRTC.setCamera: "+t),"screen"===t)pt().then((function(t){var n=rt();vt("audio",n.audioEnabled),vt("video",n.videoEnabled),t.getVideoTracks()[0].onended=function(){var t=rt();t.cameras.length>0&&e(t.cameras[0].deviceId)},Qe.isStarted()&&(Et(),Ct()),null!=it.onCameraChanged&&it.onCameraChanged("screen")}));else{var n=Object(r["a"])({},tt.constraints);"boolean"===typeof n.video&&(n.video={}),n.video=Object.assign({},n.video,{deviceId:t}),at({constraints:n}).then((function(){ut("video").then((function(){var e=rt();vt("audio",e.audioEnabled),vt("video",e.videoEnabled),Qe.isStarted()&&(Et(),Ct()),null!=it.onCameraChanged&&it.onCameraChanged(t)}))}))}},bt=function(e){console.log("WowzaWebRTC.setMicrophone: "+e);var t=Object(r["a"])({},tt.constraints);"boolean"===typeof t.audio&&(t.audio={}),t.audio=Object.assign({},t.audio,{deviceId:e}),at({constraints:t}).then((function(){ut("audio").then((function(){var t=rt();vt("audio",t.audioEnabled),vt("video",t.videoEnabled),Qe.isStarted()&&(Et(),Ct()),null!=it.onMicrophoneChanged&&it.onMicrophoneChanged(e)}))}))},Ct=function(){var e=rt();console.log("WowzaWebRTC.start()"),Qe.start({wsURL:e.sdpURL,localStream:e.stream,streamInfo:e.streamInfo,mediaInfo:e.mediaInfo,userData:e.userData,mungeSDP:xe,onconnectionstatechange:ft,onstop:mt,onstats:it.onStats||void 0,onerror:Tt})},Et=function(){console.log("WowzaWebRTC.stop()"),Qe.stop()},Tt=function(e){console.log("WowzaWebRTC ERROR:"),console.log(e),null==e.message&&null!=e.target&&console.log("typeof error.target: "+Object(Ce["a"])(e.target)),null!=it.onError&&it.onError(e)},St={on:st,set:ct,getState:rt,start:Ct,stop:Et,setAudioEnabled:gt,setVideoEnabled:ht,setCamera:_t,setMicrophone:bt},At=St;window.WowzaWebRTCPublish=At;var wt=Te["a"].browserDetails;function Rt(){return{sdpURL:"wss://".concat(C(p.STR_WEB_RTC_URL),".streamlock.net/webrtc-session.json"),applicationName:"live",streamName:C(p.STR_WEB_RTC_SENDER_STREAM),audioBitrate:C(p.STR_WEB_RTC_AUDIO_BITRATE),audioCodec:"opus",videoBitrate:C(p.STR_WEB_RTC_VIDEO_BITRATE),videoCodec:"VP8",videoFrameRate:C(p.STR_WEB_RTC_FRMAE_RATE),frameSize:C(p.STR_WEB_RTC_FRAME_SIZE)}}var Ot=null,Bt=null,xt={publishing:!1,pendingPublish:!1,pendingPublishTimeout:void 0,muted:!1,video:!0,selectedCam:"",selectedMic:"",settings:Rt()},yt=function(e,t,n,o,i){Ht(),At.on({onStateChanged:function(o){console.log("WowzaWebRTCPublish.onStateChanged"),"connected"===o.connectionState?e():"failed"===o.connectionState?t():n()},onCameraChanged:function(e){e!==xt.selectedCam&&(xt.selectedCam=e)},onMicrophoneChanged:function(e){e!==xt.selectedMic&&(xt.selectedMic=e)},onError:o,onSoundMeter:i}),At.set({videoElementPublish:document.getElementById("wowza-sender"),useSoundMeter:!1}).then((function(e){de.$emit(ce,e.cameras),de.$emit(le,e.microphones);var t=e.cameras[0].deviceId.replace("CameraMobile_","");At.setCamera(t),xt.selectedCam=t}))},It=function(){if(""===xt.settings.sdpURL)throw"No stream configured.";if(""===xt.settings.applicationName)throw"Missing application name.";if(""===xt.settings.streamName)throw"Missing stream name.";return!0},Dt=function(e){var t=JSON.parse(JSON.stringify(At.getState().constraints));if("default"===e)t.video["width"]={min:"640",ideal:"1280",max:"1920"},t.video["height"]={min:"360",ideal:"720",max:"1080"};else{var n=e.split("x");t.video["width"]={exact:n[0]},t.video["height"]={exact:n[1]}}At.set({constraints:t})},Mt=function(e){return xt.settings=e,At.set(e)},jt=function(){It()&&At.start()},Nt=function(){At.stop()},Pt=function(){At.setVideoEnabled(!0)},Ut=function(){At.setAudioEnabled(!1)},Wt=function(e){var t;"OverconstrainedError"==e.name?(console.log("OverconstrainedError"),Dt("default")):t=e.message?e.message:e,Vt(t),Nt()},kt=function e(t){t?(console.log("Publish Disable"),xt.pendingPublish=!0,xt.pendingPublishTimeout=setTimeout((function(){Nt(),Wt({message:"Publish failed. Unable to connect."}),e(!1)}),1e4)):(xt.pendingPublish=!1,null!=xt.pendingPublishTimeout&&(clearTimeout(xt.pendingPublishTimeout),xt.pendingPublishTimeout=void 0))},qt=function(){return Mt(xt.settings)},Vt=function(e){console.log("showErrorPanel",e),Ot(e)},Lt=function(){console.log("hideErrorPanel"),Bt()},Ft=function(){xt.publishing=!0,kt(!1),Lt(),console.log("onPublishPeerConnected")},zt=function(){kt(!1),Ft(),Wt({message:"Peer connection failed."}),console.log("onPublishPeerConnectionFailed")},Jt=function(){xt.pendingPublish||(xt.publishing=!1,console.log("onPublishPeerConnectionStopped"))},Ht=function(){Pt(),Ut(),de.$on(ue,(function(e){At.setCamera(e),xt.selectedCam=e}))},Kt=function(e,t){Ot=e,Bt=t;var n=function(){var e=xt.settings;null!=e.frameSize&&""!==e.frameSize&&"default"!==e.frameSize&&Dt(e.frameSize),"safari"===wt.browser&&console.log("Safari don't support VP9")};n(),yt(Ft,zt,Jt,Wt)};function Gt(){Nt();try{Pt(),Lt(),console.log("PPPPPublish"),xt.settings=Rt(),console.log(xt.settings.videoBitrate),qt().then((function(){kt(!0),jt()}))}catch(e){Wt(e)}}var Zt={created:function(){var e=function(e){de.$emit(se,e)},t=function(){console.log("### onHide")};this.$nextTick((function(){console.log("Sender Created"),Kt(e,t)})),de.$on(re,(function(){console.log("RECEIVE PUBLISH")}))}},$t=Zt,Yt=(n("68b5"),Object(D["a"])($t,_e,be,!1,null,"4bf6860c",null)),Qt=Yt.exports,Xt={data:function(){return{margin_top:"0px",is_live_time:!1,is_video_show:"none",sender_width:0,sender_height:0,shadow:"3px 6px 5px 0px #00000016"}},components:{WebRTCSender:Qt,HLSVideo:pe},created:function(){var e=this;de.$on(oe,(function(){e.setLiveStatus()}));var t=.6*window.innerHeight;this.sender_width=9*t/16,this.sender_height=t,this.margin_top=.15*window.innerHeight+"px","/event/live"===this.$router.history.current.path&&this.setLiveStatus()},methods:{goBack:function(){this.$router.go(-1)},gotoHome:function(){this.$router.push("/info")},setLiveStatus:function(){console.log("!!!!"),this.shadow="none",this.is_live_time=!0,this.is_video_show="block",this.margin_top="0px";var e=9*window.innerWidth/16*.5;this.sender_width=9*e/16,this.sender_height=e}}},en=Xt,tn=(n("2763"),Object(D["a"])(en,X,ee,!1,null,"059fc687",null)),nn=tn.exports,on=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"root"},[n("div",{ref:"sub",staticClass:"sub_title",style:{marginTop:e.margin_top}},[e._v(" Check your camera ")]),n("div",{staticClass:"option",style:{height:e.option_height}},[n("v-btn",{staticClass:"btn ok_btn",attrs:{text:""},on:{click:e.gotoLive}},[e._v(" CONTINUE ")]),n("v-btn",{staticClass:"btn cancle_btn",attrs:{text:""},on:{click:e.gotoHome}},[e._v(" BACK ")])],1)])},an=[],rn=(n("4c53"),{data:function(){return{margin_top:"0px",option_height:"0px"}},created:function(){var e=this;this.$nextTick((function(){var t=e.$refs.sub.getBoundingClientRect().height,n=.15*window.innerHeight;e.margin_top=n-t-10+"px";var o=document.documentElement.clientHeight-.75*window.innerHeight;e.option_height=o-20+"px"}))},methods:{gotoLive:function(){console.log("PUBLISH"),Gt(),this.$router.push("/event/live")},gotoHome:function(){this.$router.push("/")}}}),sn=rn,cn=(n("b830"),Object(D["a"])(sn,on,an,!1,null,"7790f72c",null)),ln=cn.exports;j()(cn,{VBtn:z["a"]});var un=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"root"},[n("Chatting",{staticClass:"chat"}),n("div",{staticClass:"count"},[e._v(e._s(e.h_count))]),e._l(e.obj,(function(t,o){return n(t.component,{key:o,ref:o,refInFor:!0,tag:"component",staticClass:"emoji_item",attrs:{props_data:t.emoji},on:{end_anim:e.deleteItem}})}))],2)},dn=[],fn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"bg",staticClass:"tab_bg"},[n("ChattingList",{staticClass:"list"}),n("div",{staticClass:"shadow_up"}),n("ChattingInput",{staticClass:"input"}),e.isEmojiEnable?n("div",{staticClass:"emoji_list"},[n("div",{staticClass:"box"},e._l(e.getEmojiItem,(function(t){return n("div",{key:t.index,staticClass:"emoji_item",on:{click:function(n){return e.ADD_EMOJI(t)}}},[e._v(" "+e._s(t)+" ")])})),0)]):e._e()],1)},mn=[],vn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"outline"},[n("v-btn",{staticClass:"emoji_btn",attrs:{icon:"",color:e.emoji_color},on:{click:function(t){return e.setEmojiEnable(!0)}}},[n("v-icon",[e._v("mdi-emoticon-outline")])],1),n("form",{staticClass:"form",on:{submit:e.sendMessage}},[n("input",{ref:"message_input",staticClass:"text_input",attrs:{type:"text",placeholder:"Type message..."},domProps:{value:e.input_data},on:{input:e.updataInput,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.sendMessage(t)}}})]),n("div",{staticClass:"btn_cls",on:{click:e.sendMessage}},[n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg","enable-background":"new 0 0 24 24",height:"24",viewBox:"0 0 24 24",width:"24"}},[n("rect",{attrs:{fill:"none",height:"24",width:"24",x:"0",y:"0"}}),n("path",{style:{fill:e.button_color},attrs:{d:"M12,2C6.48,2,2,6.48,2,12c0,5.52,4.48,10,10,10s10-4.48,10-10C22,6.48,17.52,2,12,2z M13.88,11.54l-4.96,4.96l-1.41-1.41 l4.96-4.96L10.34,8l5.65,0.01L16,13.66L13.88,11.54z"}})])])],1)},gn=[],hn={data:function(){return{input_data:"",isEdit:!1,button_color:"#9e9e9e",emoji_color:"#666666"}},methods:{sendMessage:function(){var e=this;if(this.input_data){var t=this.input_data;this.$store.dispatch("SEND_MESSAGE",t).then((function(t){console.log("RR = ",t),t||(e.input_data="",e.isEdit=!1,de.$emit(ae),console.log(e.$refs.message_input),e.$refs.message_input.blur())}))}},getBtnClass:function(){return 1==this.$refs.input.value?"send_btn":"wait_btn"},updataInput:function(e){this.input_data=e.target.value,this.isEdit=this.input_data.length>0,this.button_color=this.isEdit?"#03dac5":"#9e9e9e"},setEmojiEnable:function(e){console.log(e);var t="#666666"===this.emoji_color;de.$emit(ie,t),this.emoji_color=t?"#03DAC5":"#666666"}}},pn=hn,_n=(n("20c4"),n("132d")),bn=Object(D["a"])(pn,vn,gn,!1,null,"280f080f",null),Cn=bn.exports;j()(bn,{VBtn:z["a"],VIcon:_n["a"]});var En=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"root"},[o("img",{ref:"logo",staticClass:"logo_img",attrs:{src:n("0df0")}}),o("ul",{ref:"rlist",staticClass:"chatting_list"},e._l(e.getMessages,(function(t){return o("li",{key:t.index,staticClass:"msg_obj"},[o("div",{staticClass:"top"}),o("div",[t.isMine?o("div",{staticClass:"msg_horizontal msg_right"},[o("div",{staticClass:"msg_time"},[e._v(" "+e._s(e.getFormatDate(t.time))+" ")]),o("div",{staticClass:"msg_item msg_mine"},[o("div",[e._v(" "+e._s(t.message)+" ")])])]):o("div",[o("div",{staticClass:"msg_top"},[e._v(" "+e._s(t.user)+" ")]),o("div",{staticClass:"msg_horizontal"},[o("div",{staticClass:"msg_item msg_other"},[o("div",[e._v(" "+e._s(t.message)+" ")])]),o("div",{staticClass:"msg_time"},[e._v(" "+e._s(e.getFormatDate(t.time))+" ")])])])])])})),0)])},Tn=[],Sn={data:function(){return{msg_right:"msg_right",msg_mine:"msg_mine",msg_other:"msg_other",color_mine:"#03dac5",color_other:"#f0f1f5"}},computed:Object(r["a"])({},Object(E["c"])(["getMessages"])),created:function(){var e=this;de.$on(ae,(function(){e.scrollToBottom()})),this.$nextTick((function(){var t=e.$refs.rlist,n=window.innerHeight-t.getBoundingClientRect().y-50;t.style.height=n+"px";var o=9*window.innerWidth/16;e.$refs.logo.style.marginTop=o+"px"}))},mounted:function(){var e=this;this.$nextTick((function(){e.scrollToBottom()}))},watch:{getMessages:function(){console.log("add item"),this.$nextTick((function(){this.scrollToBottom()}))}},methods:{getFormatDate:function(e){var t=new Date(e);return t.toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:!0})},scrollToBottom:function(){var e=this.$refs.rlist;e.scrollTop=e.scrollHeight}}},An=Sn,wn=(n("acd8"),Object(D["a"])(An,En,Tn,!1,null,"74db19c8",null)),Rn=wn.exports,On={components:{ChattingInput:Cn,ChattingList:Rn},data:function(){return{isEmojiEnable:!1}},created:function(){var e=this;this.$nextTick((function(){var t=e.$refs.bg.getBoundingClientRect().top,n=window.innerHeight-t;console.log(t,n),e.$refs.bg.style.height=n-50+"px"})),de.$on(ie,(function(t){e.isEmojiEnable=t}))},computed:Object(r["a"])({},Object(E["c"])(["getEmojiItem"])),methods:Object(r["a"])({},Object(E["b"])(["ADD_EMOJI"]))},Bn=On,xn=(n("1ecf"),Object(D["a"])(Bn,fn,mn,!1,null,"647efbdb",null)),yn=xn.exports,In=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"root"},[n("div",{staticClass:"icon",class:{anim:this.isAnim},style:{left:e.getLeft,transition:"all "+e.getDuration+"s linear"},attrs:{id:"hid"}},[e._v(" "+e._s(e.props_data)+" ")])])},Dn=[],Mn={data:function(){return{isAnim:!1,getLeft:"0px",getDuration:0}},props:["props_data"],mounted:function(){var e=this,t=.8,n=3,o=this.getRandom(t,n);this.getDuration=o;var i=Math.floor(this.getRandom(50,window.innerWidth-50))+"px";this.getLeft=i;var a=setTimeout((function(){clearTimeout(a),e.$emit("end_anim",e.$vnode.data.ref)}),1e3*o),r=setTimeout((function(){e.isAnim=!0,clearTimeout(r)}),10)},methods:{getRandom:function(e,t){return Math.random()*(t-e)+e}}},jn=Mn,Nn=(n("1bbe"),Object(D["a"])(jn,In,Dn,!1,null,"6fa01154",null)),Pn=Nn.exports,Un={components:{Chatting:yn,EmojiIcon:Pn},data:function(){return{h_count:0,obj:{},video_width:0,video_height:0}},created:function(){var e=this;this.video_width=window.innerWidth,this.video_height=9*window.innerWidth/16,de.$on("RECIEVE_DATA",(function(t){e.obj["idx"+e.h_count]={component:Pn,emoji:t.message},e.h_count++}))},methods:{deleteItem:function(e){this.$delete(this.obj,e)}}},Wn=Un,kn=(n("7fb3"),Object(D["a"])(Wn,un,dn,!1,null,"4a7af980",null)),qn=kn.exports;o["a"].use(k["a"]);var Vn=function(e,t,n){"/event/preset"===t.path&&"/event/live"===e.path||"/info"===t.path&&"/event/preset"===e.path?(n(),de.$emit(oe,e.path)):Fn.push("/")},Ln=[{path:"/",redirect:"/info"},{path:"/info",component:K},{path:"/event",component:nn,children:[{path:"preset",component:ln,beforeEnter:Vn},{path:"live",component:qn,beforeEnter:Vn}]}],Fn=new k["a"]({routes:Ln}),zn=Fn;n("99af"),n("4160"),n("159b");o["a"].use(E["a"]);var Jn,Hn=100,Kn=new E["a"].Store({state:{dic_list:[],hrl_url:"",last_timestamp:0,messages:[],user_name:"테스트",user_code:"",emoji_list:["😍","🥳","✌🏻","😺","🤡","👍🏻","💋","⭐️","🌹"],tab_contents_height:0},getters:{getMessages:function(e){return e.messages},getHlsUrl:function(e){return e.hrl_url},getEmojiItem:function(e){return e.emoji_list}},mutations:{SET_TAB_CONTENS_HEIGHT:function(e,t){e.tab_contents_height=t},ADD_MESSAGES:function(e,t){e.messages.length>=Hn&&e.messages.shift(),e.messages=e.messages.concat(t)},SET_NAME:function(e,t){e.user_name=t},SET_CODE:function(e,t){e.user_code=t},SET_HLS_URL:function(e,t){e.hrl_url=t},DELETE_MESSAGE_EVENT:function(){clearTimeout(Jn),Jn=null}},actions:{LOAD_MESSAGES:function(e){var t=e.state,n=e.commit;return A(Hn).then((function(e){var o=[];return e.forEach((function(e){t.dic_list.push(e.key);var n=e.val();t.last_timestamp=n.time;var i=n.type||"MESSAGE";if("MESSAGE"===i){a&&(n.isMine=!0),n.index=e.key;var a=n.user===t.user_name;o.push(n)}})),n("ADD_MESSAGES",o),e}))},SET_MESSAGE_EVENT:function(e){var t=e.state,n=e.commit;Jn=setInterval(Object(Ee["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:w(t.last_timestamp).then((function(e){var o=null,i=[];e.forEach((function(e){var n=e.val();o=n;var a=-1!=t.dic_list.indexOf(e.key);if(!a){var r=n.type||"MESSAGE";if("MESSAGE"===r){n.index=e.key;var s=n.user===t.user_name;s||i.push(e.val())}else de.$emit("RECIEVE_DATA",e.val());t.dic_list.push(e.key)}})),i.length>0&&(n("ADD_MESSAGES",i),1==o&&(t.last_timestamp=o.time))}));case 1:case"end":return e.stop()}}),e)}))),1e3)},SEND_MESSAGE:function(e,t){var n=e.commit,o=e.state,i={type:"MESSAGE",user:o.user_name,time:(new Date).getTime(),message:t};R("messages",i).then((function(e){return console.log("SEND_RESULT",e),e||n("ADD_MESSAGES",Object(r["a"])(Object(r["a"])({},i),{},{isMine:!0})),e}))},LOAD_HLS_URL:function(e){return Object(Ee["a"])(regeneratorRuntime.mark((function t(){var n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.next=3,O();case 3:o=t.sent,n("SET_HLS_URL",o);case 5:case"end":return t.stop()}}),t)})))()},ADD_EMOJI:function(e,t){var n=e.state,o={type:"EMOJI",user:n.user_name,time:(new Date).getTime(),message:t};R("messages",o).then((function(e){return console.log("SEND_EMOJI_RESULT",e),e}))}},modules:{}}),Gn=n("f309");o["a"].use(Gn["a"]);var Zn=new Gn["a"]({});o["a"].config.productionTip=!1,new o["a"]({router:zn,store:Kn,vuetify:Zn,render:function(e){return e(U)}}).$mount("#app")},"661c":function(e,t,n){},"68b5":function(e,t,n){"use strict";n("837b")},"6be5":function(e,t,n){"use strict";n("d229")},7529:function(e,t,n){},"7fb3":function(e,t,n){"use strict";n("c555")},"837b":function(e,t,n){},"85ec":function(e,t,n){},a96d:function(e,t,n){},acd8:function(e,t,n){"use strict";n("661c")},b830:function(e,t,n){"use strict";n("f0be")},c555:function(e,t,n){},d229:function(e,t,n){},d5f6:function(e,t,n){},df35:function(e,t,n){"use strict";n("7529")},f0be:function(e,t,n){},f75f:function(e,t,n){e.exports=n.p+"img/LOGO-1.a61f62f6.gif"}});
//# sourceMappingURL=app.c3c650d5.js.map